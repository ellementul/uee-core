# UEE
United Events Environment


## Задачи:

- DB module только хранит различного типа сущности
- На данный момент он должен уметь сохранять сущность модуля и загружать
- 
- Дописать тест для проверки сохранение и загрузки модуля

- Создать новый тест для новой системы
- Добавить в менеджер функцию загрузки модуля
- Убрать приватные методы менеджера в абстрасктного родителя
- В тесте проверить что DB модуль загружается
- В тесте дать команду на запуск DB модуля и проверить что система храения сообщаила о готовности

- Создать модуль с хранилищем
- Написать тест для него проверяющий работу его состояний
- Добавить в тест проверку того что сохранения хранилища работает

- В тесте для системы хранения добавить новый модуль с хранилищем
- Проверить что он стартует автоматически когда зависит только от системы хранения
- Проверить что пересоздание модуля с нуля не потеряет данные внутри хранилища

- Переделать фабрику для запуска среды
  - Фабрика больше не принимает готовые объекты, а только конструторы
  - Фабрика принимает в аргументы конфиг для перменных среды
  - Конфиг это json файл который не трекается в гите
  - Фабрика принимает системы в качестве аргумента, эти системы заранее содержат уже конструкторы для модулей это системы
  - Передать фабрике в качестве теста систему хранения
  - Сделать дефолтным адаптером для базы данных NoDB
  - Путь к файлу для базы должен быть передан через конфиг


- Разделить фабрики на серверную и браузерную
- Перейти на [https://parceljs.org/getting-started/webapp/]
- Серверная Фабрика не просто функция, а служба.
- Серверная фабрика должна запускать сборку модулей в бандл в папку статики
- Серверная Фабрика должна стартовать сервер для раздачи статики
- Серверная Фабрика должна стартовать серверную среду
- Серверная Фабрика принимает конструктор для корневого модуля
- Серверная Фабрика должна стартовать сервер для сокетов без команды
- Браузерная фабрика должна обязательно ожидать UI system в качестве аргумента

- Определить UI System
  - Events
    - Change User Actor
    - Update User Actor
    - Call User Action
    - Rebind User Action
  - Modules
    - Display
    - UserActor
    - BindingOfActions



```javascript
class YourModule extends UEEModule {
  constructor (yourModuleParams) {

  }

  defEvents () {
    return [{
      // Define event signature 
      name: 'YourEvent', 
      payloadType: { 
        system: "YourSystemName(Or empty)", 
        entity: "NameObject(Or empty)"
      } 
    }]
  }
}
```

And your module send UEEManager to run
```javascript
import { UEE } from 'uee'
import YourModule from 'your-module.js'
import YourTransport from 'your-transport.js'
new UEE({
  transport: new YourTransport(transportParams),
  modules: [new YourModule(yourModuleParams)],
  isRun: true,
})
```